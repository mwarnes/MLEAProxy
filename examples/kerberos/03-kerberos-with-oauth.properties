# ================================================================
# Kerberos with OAuth Bridge
# ================================================================
# Use Case: Kerberos authentication + OAuth JWT token generation
# Features: SPNEGO auth, automatic JWT generation, token bridge
# Endpoint: POST http://localhost:8080/kerberos/oauth
# ================================================================

# ----------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------
logging.level.root=INFO
logging.level.com.marklogic.handlers.KerberosKDCServer=DEBUG
logging.level.com.marklogic.handlers.undertow.KerberosAuthHandler=DEBUG
logging.level.com.marklogic.handlers.undertow.OAuthTokenHandler=DEBUG

# ----------------------------------------------------------------
# Kerberos KDC Configuration
# ----------------------------------------------------------------
kerberos.enabled=true
kerberos.realm=EXAMPLE.COM
kerberos.kdc.host=localhost
kerberos.kdc.port=88
kerberos.principals=admin@EXAMPLE.COM,user@EXAMPLE.COM,HTTP/localhost@EXAMPLE.COM
kerberos.service.principal=HTTP/localhost@EXAMPLE.COM

# ----------------------------------------------------------------
# OAuth Configuration
# ----------------------------------------------------------------
# JWT token validity (1 hour)
oauth.token.validity=3600

# Refresh token validity (1 day)
oauth.refresh.token.validity=86400

# RSA private key for JWT signing
#oauth.keypath=classpath:static/certificates/privkey.pem

# Default roles for tokens
oauth.default.roles=user

# ================================================================
# Spring Boot Web Server
# ================================================================
server.port=8080

# ================================================================
# Kerberos to OAuth Bridge Flow
# ================================================================
# Step 1: Obtain Kerberos ticket
#   kinit admin@EXAMPLE.COM
#
# Step 2: Get OAuth JWT token using Kerberos ticket
#   curl -X POST http://localhost:8080/kerberos/oauth \
#     --negotiate -u : \
#     -v
#
# Response:
#   {
#     "access_token": "eyJhbGc...",
#     "token_type": "Bearer",
#     "expires_in": 3600,
#     "principal": "admin@EXAMPLE.COM"
#   }
#
# Step 3: Use JWT token for API access
#   curl -H "Authorization: Bearer eyJhbGc..." http://api/endpoint
# ================================================================

# ================================================================
# Use Cases
# ================================================================
# - Bridge legacy Kerberos infrastructure to modern OAuth APIs
# - Enable Kerberos users to access OAuth-protected resources
# - Centralized token management for Kerberos principals
# - Single sign-on across Kerberos and OAuth domains
# ================================================================
