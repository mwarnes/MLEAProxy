# ================================================================
# Kerberos Full Stack Integration
# ================================================================
# Use Case: Complete authentication solution with all protocols
# Features: Kerberos + OAuth + SAML + LDAP role resolution
# Endpoints:
#   - POST http://localhost:8080/kerberos/auth  (SPNEGO)
#   - POST http://localhost:8080/kerberos/oauth (JWT tokens)
#   - POST http://localhost:8080/kerberos/saml  (SAML assertions)
# ================================================================

# ----------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------
logging.level.root=INFO
logging.level.com.marklogic.handlers.KerberosKDCServer=DEBUG
logging.level.com.marklogic.handlers.undertow.KerberosAuthHandler=DEBUG
logging.level.com.marklogic.handlers.undertow.OAuthTokenHandler=DEBUG
logging.level.com.marklogic.handlers.undertow.SAMLAuthHandler=DEBUG
logging.level.com.marklogic.service.LDAPRoleService=DEBUG

# ----------------------------------------------------------------
# Kerberos KDC Configuration
# ----------------------------------------------------------------
kerberos.enabled=true
kerberos.realm=EXAMPLE.COM
kerberos.kdc.host=localhost
kerberos.kdc.port=88
kerberos.principals=admin@EXAMPLE.COM,user@EXAMPLE.COM,developer@EXAMPLE.COM,HTTP/localhost@EXAMPLE.COM
kerberos.service.principal=HTTP/localhost@EXAMPLE.COM

# ----------------------------------------------------------------
# OAuth Configuration
# ----------------------------------------------------------------
# JWT token validity (1 hour)
oauth.token.validity=3600

# Refresh token validity (1 day)
oauth.refresh.token.validity=86400

# RSA private key for JWT signing
#oauth.keypath=classpath:static/certificates/privkey.pem

# Default roles
oauth.default.roles=user

# ----------------------------------------------------------------
# SAML Configuration
# ----------------------------------------------------------------
saml.debug=true

# SAML response validity (5 minutes)
saml.response.validity=300

# Default roles
saml.default.roles=user

# Optional: Custom certificates
#saml.capath=/path/to/certificate.pem
#saml.keypath=/path/to/rsakey.pem

# ----------------------------------------------------------------
# LDAP Role Resolution (Optional)
# ----------------------------------------------------------------
# Enable LDAP group-based role assignment
# Uncomment to enable LDAP role lookup

# LDAP server for group lookup
#ldap.role.server=ldap://localhost:10389

# LDAP base DN for group search
#ldap.role.base=ou=groups,dc=example,dc=com

# LDAP bind credentials
#ldap.role.binddn=cn=admin,dc=example,dc=com
#ldap.role.bindpw=password

# LDAP attribute containing group membership
#ldap.role.attribute=memberOf

# ----------------------------------------------------------------
# User Repository
# ----------------------------------------------------------------
#users.json.path=classpath:users.json

# ================================================================
# Spring Boot Web Server
# ================================================================
server.port=8080

# ================================================================
# Complete Authentication Flow
# ================================================================
# 1. Kerberos Authentication Only:
#    curl -X POST http://localhost:8080/kerberos/auth --negotiate -u :
#
# 2. Kerberos → OAuth JWT Token:
#    curl -X POST http://localhost:8080/kerberos/oauth --negotiate -u :
#    Response: {"access_token": "eyJ...", "token_type": "Bearer"}
#
# 3. Kerberos → SAML Assertion:
#    curl -X POST http://localhost:8080/kerberos/saml --negotiate -u :
#    Response: <saml2:Assertion>...</saml2:Assertion>
#
# 4. With LDAP Role Resolution (if enabled):
#    - Groups from LDAP are included in OAuth tokens and SAML assertions
#    - Automatic group-to-role mapping
# ================================================================

# ================================================================
# Role Resolution Priority
# ================================================================
# When LDAP role resolution is enabled, roles are determined by:
#
# 1. LDAP Groups (highest priority)
#    - Retrieved from LDAP directory
#    - Mapped from group CNs to role names
#
# 2. JSON User Repository
#    - From users.json file
#    - User-specific role assignments
#
# 3. Default Configuration (fallback)
#    - oauth.default.roles or saml.default.roles
#    - Used when no other roles found
# ================================================================

# ================================================================
# Enterprise Integration Scenarios
# ================================================================
# Scenario 1: Legacy Kerberos + Modern OAuth APIs
#   - Users authenticate with Kerberos
#   - Receive OAuth JWT tokens
#   - Access OAuth-protected microservices
#
# Scenario 2: Kerberos + SAML Federation
#   - Users authenticate with Kerberos
#   - Receive SAML assertions
#   - SSO to SAML service providers
#
# Scenario 3: Complete SSO Solution
#   - Kerberos authentication
#   - LDAP group membership
#   - OAuth tokens for APIs
#   - SAML assertions for apps
#   - Unified identity across all systems
# ================================================================
