# ================================================================
# LDAP Example 3: Secure LDAP Proxy (LDAPS Backend)
# ================================================================
# Description: Proxy LDAP requests with secure LDAPS connection to backend
# Client connects via LDAP, MLEAProxy connects to backend via LDAPS
#
# Prerequisites:
#   - Backend LDAP server must support LDAPS (port 636)
#   - Optional: Truststore with CA certificate for backend validation
#   - Optional: Keystore for TLS client authentication
#
# Usage:
#   1. Update ldapserver.server1.host below
#   2. Optional: Configure truststore/keystore paths
#   3. Copy this file to the root directory as mleaproxy.properties
#   4. Run: java -jar mleaproxy.jar
#   5. Test: ldapsearch -H ldap://localhost:30389 \
#            -D "cn=admin,dc=example,dc=com" \
#            -w password -b "dc=example,dc=com" \
#            "(uid=user1)"
# ================================================================

# Enable LDAP debug logging
ldap.debug=true

# ================================================================
# LDAP Listeners
# ================================================================
listeners=proxy

# ----------------------------------------------------------------
# LDAP Listener: proxy
# ----------------------------------------------------------------
listener.proxy.ipaddress=0.0.0.0
listener.proxy.port=30389
listener.proxy.debuglevel=DEBUG
listener.proxy.secure=false
listener.proxy.ldapset=set1
listener.proxy.ldapmode=single
listener.proxy.requestProcessor=ldapproxy
listener.proxy.description=LDAP proxy with LDAPS backend

# ================================================================
# Request Processors
# ================================================================
requestProcessor.ldapproxy.authclass=com.marklogic.processors.ProxyRequestProcessor
requestProcessor.ldapproxy.debuglevel=DEBUG

# ================================================================
# LDAP Server Sets
# ================================================================
ldapset.set1.servers=server1
ldapset.set1.secure=true

# Optional: Add truststore for CA certificate validation
# ldapset.set1.truststore=/path/to/truststore.jks
# ldapset.set1.truststorepasswd=password

# Optional: Add keystore for TLS client authentication
# ldapset.set1.keystore=/path/to/keystore.jks
# ldapset.set1.keystorepasswd=password

# ================================================================
# LDAP Servers
# ================================================================
# Backend LDAPS server configuration
ldapserver.server1.host=kerberos.marklogic.local
ldapserver.server1.port=636
