# ================================================================
# LDAP Example 4: Fully Secure LDAP Proxy (LDAPS Both Sides)
# ================================================================
# Description: LDAPS on both client and backend connections
# Complete end-to-end encryption for maximum security
#
# Prerequisites:
#   - Backend LDAP server must support LDAPS (port 636)
#   - Keystore with server certificate for client-facing LDAPS
#   - Optional: Truststore with CA certificate for backend validation
#
# Certificate Generation:
#   keytool -genkeypair -alias mleaproxy -keyalg RSA -keysize 2048 \
#           -validity 365 -keystore mlproxy.jks -storepass password \
#           -dname "CN=localhost,OU=IT,O=Company,L=City,ST=State,C=US"
#
# Usage:
#   1. Generate or obtain server certificate (see above)
#   2. Update paths and passwords below
#   3. Copy this file to the root directory as mleaproxy.properties
#   4. Run: java -jar mleaproxy.jar
#   5. Test: ldapsearch -H ldaps://localhost:30636 \
#            -D "cn=admin,dc=example,dc=com" \
#            -w password -b "dc=example,dc=com" \
#            "(uid=user1)"
# ================================================================

# Enable LDAP debug logging
ldap.debug=true

# ================================================================
# LDAP Listeners
# ================================================================
listeners=proxy

# ----------------------------------------------------------------
# LDAP Listener: proxy (LDAPS)
# ----------------------------------------------------------------
listener.proxy.ipaddress=0.0.0.0
listener.proxy.port=30636
listener.proxy.debuglevel=DEBUG
listener.proxy.secure=true
listener.proxy.keystore=/Users/mwarnes/mlproxy.jks
listener.proxy.keystorepasswd=password
listener.proxy.ldapset=set1
listener.proxy.ldapmode=single
listener.proxy.requestProcessor=ldapproxy
listener.proxy.description=Fully secure LDAP proxy (LDAPS both sides)

# ================================================================
# Request Processors
# ================================================================
requestProcessor.ldapproxy.authclass=com.marklogic.processors.ProxyRequestProcessor
requestProcessor.ldapproxy.debuglevel=DEBUG

# ================================================================
# LDAP Server Sets
# ================================================================
ldapset.set1.servers=server1
ldapset.set1.secure=true

# Optional: Add truststore for backend CA certificate validation
# ldapset.set1.truststore=/path/to/truststore.jks
# ldapset.set1.truststorepasswd=password

# ================================================================
# LDAP Servers
# ================================================================
# Backend LDAPS server configuration
ldapserver.server1.host=kerberos.marklogic.local
ldapserver.server1.port=636
