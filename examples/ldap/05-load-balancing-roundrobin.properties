# ================================================================
# LDAP Example 5: Load Balancing (Round Robin)
# ================================================================
# Description: Balance requests across multiple LDAP servers
# Distributes load evenly using round-robin algorithm
#
# Load Balancing Modes:
#   - single        : Only first server used (development/testing)
#   - failover      : Primary server with backup (high availability)
#   - roundrobin    : Distribute evenly (balanced load distribution)
#   - roundrobindns : DNS-based round robin (cloud/dynamic environments)
#   - fewest        : Least connections (variable request sizes)
#   - fastest       : Fastest response time (heterogeneous servers)
#
# Usage:
#   1. Update server hosts and ports below
#   2. Choose load balancing mode (roundrobin recommended)
#   3. Copy this file to the root directory as mleaproxy.properties
#   4. Run: java -jar mleaproxy.jar
#   5. Test: ldapsearch -H ldap://localhost:30389 \
#            -D "cn=admin,dc=example,dc=com" \
#            -w password -b "dc=example,dc=com" \
#            "(uid=user1)"
# ================================================================

# Enable LDAP debug logging
ldap.debug=true

# ================================================================
# LDAP Listeners
# ================================================================
listeners=proxy

# ----------------------------------------------------------------
# LDAP Listener: proxy
# ----------------------------------------------------------------
listener.proxy.ipaddress=0.0.0.0
listener.proxy.port=30389
listener.proxy.debuglevel=DEBUG
listener.proxy.ldapset=set1
listener.proxy.ldapmode=roundrobin
listener.proxy.requestProcessor=ldapproxy
listener.proxy.description=Load balancing LDAP proxy

# ================================================================
# Request Processors
# ================================================================
requestProcessor.ldapproxy.authclass=com.marklogic.processors.ProxyRequestProcessor
requestProcessor.ldapproxy.debuglevel=DEBUG

# ================================================================
# LDAP Server Sets
# ================================================================
ldapset.set1.servers=server1,server2,server3

# ================================================================
# LDAP Servers
# ================================================================
# Backend LDAP server 1
ldapserver.server1.host=192.168.0.50
ldapserver.server1.port=10389

# Backend LDAP server 2
ldapserver.server2.host=192.168.0.51
ldapserver.server2.port=10389

# Backend LDAP server 3
ldapserver.server3.host=192.168.0.52
ldapserver.server3.port=10389
