# ================================================================
# OAuth 2.0 with Refresh Token Support
# ================================================================
# Use Case: Long-lived sessions with token rotation
# Features: Refresh token grant, automatic token rotation
# Grant Types: password, client_credentials, refresh_token
# ================================================================

# ----------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------
logging.level.root=INFO
logging.level.com.marklogic.handlers.undertow.OAuthTokenHandler=DEBUG
logging.level.com.marklogic.service.RefreshTokenService=DEBUG

# ----------------------------------------------------------------
# OAuth Token Configuration
# ----------------------------------------------------------------
# Short-lived access tokens (30 minutes)
oauth.token.validity=1800

# Long-lived refresh tokens (7 days)
oauth.refresh.token.validity=604800

# RSA private key path
#oauth.keypath=classpath:static/certificates/privkey.pem

# Default roles
oauth.default.roles=user

# ----------------------------------------------------------------
# User Repository
# ----------------------------------------------------------------
#users.json.path=classpath:users.json

# ================================================================
# Spring Boot Web Server
# ================================================================
server.port=8080

# ================================================================
# OAuth 2.0 Refresh Token Flow
# ================================================================
# Step 1: Get initial access token with password grant
#   curl -X POST http://localhost:8080/oauth/token \
#     -d "grant_type=password&username=admin&password=admin" \
#     -d "client_id=marklogic&client_secret=secret"
#
# Response includes:
#   {
#     "access_token": "eyJhbGc...",
#     "token_type": "Bearer",
#     "expires_in": 1800,
#     "refresh_token": "4f2c7b1a..."
#   }
#
# Step 2: Use refresh token to get new access token
#   curl -X POST http://localhost:8080/oauth/token \
#     -d "grant_type=refresh_token&refresh_token=4f2c7b1a..." \
#     -d "client_id=marklogic&client_secret=secret"
#
# Step 3: Repeat step 2 as needed before access token expires
# ================================================================

# ================================================================
# Refresh Token Best Practices
# ================================================================
# 1. Store refresh tokens securely (encrypted storage)
# 2. Use HTTPS to transmit refresh tokens
# 3. Implement refresh token rotation (new refresh token on each use)
# 4. Set appropriate expiration (1-7 days typical)
# 5. Revoke refresh tokens on logout or security events
# 6. Monitor refresh token usage for anomalies
# ================================================================

# ================================================================
# Grant Types Supported
# ================================================================
# password             - Resource Owner Password Credentials
#                        Use: Direct username/password authentication
#
# client_credentials   - Client Credentials
#                        Use: Service-to-service authentication
#
# refresh_token        - Refresh Token
#                        Use: Get new access token without re-authentication
# ================================================================
