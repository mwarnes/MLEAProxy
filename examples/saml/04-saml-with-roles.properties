# ================================================================
# SAML 2.0 with Role-Based Access Control
# ================================================================
# Use Case: Authorization integration with role attributes
# Features: Role resolution, attribute statements, RBAC support
# ================================================================

# ----------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------
logging.level.root=INFO
logging.level.com.marklogic.handlers.undertow.SAMLAuthHandler=DEBUG
logging.level.com.marklogic.repository.JsonUserRepository=DEBUG

# ----------------------------------------------------------------
# SAML Configuration
# ----------------------------------------------------------------
saml.debug=true

# Assertion validity (5 minutes)
saml.response.validity=300

# DEFAULT ROLES
# Assigned when user not found in users.json and no roles in request
saml.default.roles=user,reader

# Certificate paths
#saml.capath=/path/to/certificate.pem
#saml.keypath=/path/to/rsakey.pem

# ----------------------------------------------------------------
# User Repository
# ----------------------------------------------------------------
# Path to users.json for user and role lookup
users.json.path=classpath:users.json

# ================================================================
# Spring Boot Web Server
# ================================================================
server.port=8080

# ================================================================
# Role Resolution Priority
# ================================================================
# SAML role assignment follows 3-tier resolution:
#
# 1. Request Parameter Roles (HIGHEST PRIORITY)
#    curl -X POST http://localhost:8080/saml/auth \
#      -d "username=admin&password=admin&roles=admin,superuser"
#
# 2. JSON User Repository Roles (USER-SPECIFIC)
#    Configured in users.json:
#    {
#      "username": "admin",
#      "roles": ["admin", "marklogic-admin"]
#    }
#
# 3. Default Configuration Roles (FALLBACK)
#    saml.default.roles=user,reader
# ================================================================

# ================================================================
# SAML Assertion with Roles
# ================================================================
# Generated assertion includes AttributeStatement:
#
# <saml2:AttributeStatement>
#   <saml2:Attribute Name="role">
#     <saml2:AttributeValue>admin</saml2:AttributeValue>
#     <saml2:AttributeValue>marklogic-admin</saml2:AttributeValue>
#   </saml2:Attribute>
#   <saml2:Attribute Name="username">
#     <saml2:AttributeValue>admin</saml2:AttributeValue>
#   </saml2:Attribute>
# </saml2:AttributeStatement>
# ================================================================

# ================================================================
# Testing with Different Roles
# ================================================================
# Admin user (high privileges):
#   curl -X POST http://localhost:8080/saml/auth \
#     -d "username=admin&password=admin&roles=admin,marklogic-admin"
#
# Standard user (default roles):
#   curl -X POST http://localhost:8080/saml/auth \
#     -d "username=user&password=password"
#
# Guest user (minimal access):
#   curl -X POST http://localhost:8080/saml/auth \
#     -d "username=guest&password=guest&roles=guest"
# ================================================================
