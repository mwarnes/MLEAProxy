================================================================================
MarkLogic External Security Configuration Instructions
================================================================================

Configuration Name: marklogic
Description: External Security configuration for in-memory LDAP server marklogic
Created: 2026-02-13

LDAP Server Details:
  URI: ldap://localhost:61389
  Base DN: dc=MarkLogic,dc=Local
  User Attribute: uid

================================================================================
Step 1: Create External Security Configuration
================================================================================

Use the MarkLogic Management REST API to create the external security
configuration using the generated JSON file.

Command:
curl -X POST --anyauth --user admin:admin \
  -H "Content-Type: application/json" \
  -d @marklogic-external-security-marklogic.json \
  http://localhost:8002/manage/v2/external-security

================================================================================
Step 2: Configure App Server to Use External Security
================================================================================

1. Open MarkLogic Admin UI (http://localhost:8001)
2. Navigate to: Configure > Security > App Servers
3. Select your app server
4. Set 'authentication' to 'application-level'
5. Set 'external-security' to 'marklogic'
6. Click OK to save

OR use the Management REST API:

curl -X PUT --anyauth --user admin:admin \
  -H "Content-Type: application/json" \
  -d '{"authentication": "application-level", "external-security": "marklogic"}' \
  http://localhost:8002/manage/v2/servers/[server-name]/properties?group-id=[group]

================================================================================
Step 3: Test Authentication
================================================================================

Test with a valid LDAP user:

curl --anyauth --user [ldap-username]:[ldap-password] \
  http://localhost:8000/

================================================================================
Troubleshooting
================================================================================

- Check ErrorLog.txt for LDAP connection errors
- Verify LDAP server is accessible from MarkLogic host
- Confirm Base DN and attribute names match your LDAP schema
- Test LDAP connectivity: ldapsearch -H ldap://localhost:61389 -b "dc=MarkLogic,dc=Local"

================================================================================
Additional Resources
================================================================================

MarkLogic External Security Documentation:
https://docs.marklogic.com/guide/security/external-auth

